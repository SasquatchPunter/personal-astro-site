---
import NavMenuIcon from "./NavMenuIcon.astro";
---

<button id="nav-menu__toggle" transition:persist="nav-menu__toggle" disabled>
	<NavMenuIcon />
</button>

<script>
	import { dispatch } from "@src/events/global/nav-menu";

	const $nav = document.querySelector("nav#nav-menu")!;
	const $button = document.querySelector("button#nav-menu__toggle")!;

	$button.addEventListener("click", () =>
		dispatch($nav.hasAttribute("data-open") ? "close" : "open"),
	);

	$button.removeAttribute("disabled");
</script>

<style>
	button#nav-menu__toggle {
		position: absolute;
		width: 2em;
		height: 2em;
		top: 0;
		right: 0;
		margin: 1em;
		z-index: 999;
		transition: 0.5s ease-in-out;

		&[disabled] {
			opacity: 0.2;
		}
	}
</style>
